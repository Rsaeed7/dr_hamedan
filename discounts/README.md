# ุณุณุชู ุชุฎููุงุช Dr. Turn

ุณุณุชู ุฌุงูุน ูุฏุฑุช ุชุฎููุงุช ุจุฑุง ูพูุชูุฑู ุฑุฒุฑู ููุจุช ูพุฒุดฺฉ Dr. Turn

## ูฺฺฏโูุง ุงุตู

### ๐ฏ ุงููุงุน ุชุฎูู
- **ุชุฎูู ุฏุฑุตุฏ**: ุชุฎูู ุจุฑ ุงุณุงุณ ุฏุฑุตุฏ ูุจูุบ
- **ุชุฎูู ูุจูุบ ุซุงุจุช**: ุชุฎูู ุจุง ูุจูุบ ูุดุฎุต
- **ฺฉ ุจุฎุฑ ฺฉ ุจฺฏุฑ**: ุชุฎูู ูฺู (ุขูุงุฏู ุชูุณุนู)

### ๐ซ ฺฉุฏูุง ุชุฎูู
- ุงุฌุงุฏ ฺฉุฏูุง ุชุฎูู ููุญุตุฑ ุจู ูุฑุฏ
- ูุฏุฑุช ุชุงุฑุฎ ุงููุถุง
- ูุญุฏูุฏุช ุชุนุฏุงุฏ ุงุณุชูุงุฏู
- ุฑุฏุงุจ ุงุณุชูุงุฏู ฺฉุงุฑุจุฑุงู

### ๐ค ุชุฎููุงุช ุฎูุฏฺฉุงุฑ
- ุชุฎูู ุงููู ููุจุช
- ุชุฎูู ุขุฎุฑ ููุชู
- ุชุฎูู ุฑูุฒูุง ุฎุงุต
- ุดุฑุงุท ูุงุจู ุชูุธู

### ๐ ฺฏุฒุงุฑุดโฺฏุฑ
- ุขูุงุฑ ุงุณุชูุงุฏู ุงุฒ ุชุฎููุงุช
- ูุญุงุณุจู ุชุฃุซุฑ ุจุฑ ุฏุฑุขูุฏ
- ฺฏุฒุงุฑุดโูุง ุฏูุฑูโุง

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### 1. ุงุถุงูู ฺฉุฑุฏู ุจู INSTALLED_APPS

```python
INSTALLED_APPS = [
    # ... ุณุงุฑ ุงูพูฺฉุดูโูุง
    'discounts',
]
```

### 2. ุงุถุงูู ฺฉุฑุฏู URLูุง

```python
# urls.py
urlpatterns = [
    # ... ุณุงุฑ URLูุง
    path('discounts/', include('discounts.urls')),
]
```

### 3. ุงุฌุฑุง Migration

```bash
python manage.py makemigrations discounts
python manage.py migrate
```

### 4. ุงุฌุงุฏ ุฏุงุฏูโูุง ููููู

```bash
python manage.py create_sample_discounts
```

## ูุฏูโูุง ุงุตู

### DiscountType (ููุน ุชุฎูู)
```python
- name: ูุงู ููุน ุชุฎูู
- type: ููุน (percentage, fixed_amount, buy_one_get_one)
- description: ุชูุถุญุงุช
- is_active: ูุถุนุช ูุนุงู/ุบุฑูุนุงู
```

### Discount (ุชุฎูู)
```python
- title: ุนููุงู ุชุฎูู
- description: ุชูุถุญุงุช
- discount_type: ููุน ุชุฎูู
- percentage: ุฏุฑุตุฏ ุชุฎูู (ุจุฑุง ุชุฎูู ุฏุฑุตุฏ)
- fixed_amount: ูุจูุบ ุซุงุจุช (ุจุฑุง ุชุฎูู ูุจูุบ ุซุงุจุช)
- applicable_to: ูุงุจู ุงุนูุงู ุจุฑุง (all, doctor, specialization, clinic, first_time, returning)
- min_amount: ุญุฏุงูู ูุจูุบ ุณูุงุฑุด
- max_discount_amount: ุญุฏุงฺฉุซุฑ ูุจูุบ ุชุฎูู
- start_date: ุชุงุฑุฎ ุดุฑูุน
- end_date: ุชุงุฑุฎ ูพุงุงู
- usage_limit: ูุญุฏูุฏุช ุงุณุชูุงุฏู ฺฉู
- usage_limit_per_user: ูุญุฏูุฏุช ุงุณุชูุงุฏู ูุฑ ฺฉุงุฑุจุฑ
- status: ูุถุนุช (active, inactive, expired, used_up)
```

### CouponCode (ฺฉุฏ ุชุฎูู)
```python
- code: ฺฉุฏ ุชุฎูู
- discount: ุชุฎูู ูุฑุชุจุท
- is_active: ูุถุนุช ูุนุงู/ุบุฑูุนุงู
```

### AutomaticDiscount (ุชุฎูู ุฎูุฏฺฉุงุฑ)
```python
- name: ูุงู
- discount: ุชุฎูู ูุฑุชุจุท
- min_appointments_count: ุญุฏุงูู ุชุนุฏุงุฏ ููุจุช
- is_first_appointment: ุงููู ููุจุช
- is_weekend: ุขุฎุฑ ููุชู
- specific_days: ุฑูุฒูุง ุฎุงุต
```

### DiscountUsage (ุงุณุชูุงุฏู ุงุฒ ุชุฎูู)
```python
- discount: ุชุฎูู
- user: ฺฉุงุฑุจุฑ
- reservation: ุฑุฒุฑู
- coupon_code: ฺฉุฏ ุชุฎูู (ุงุฎุชุงุฑ)
- original_amount: ูุจูุบ ุงุตู
- discount_amount: ูุจูุบ ุชุฎูู
- final_amount: ูุจูุบ ููุง
```

### DiscountReport (ฺฏุฒุงุฑุด ุชุฎูู)
```python
- discount: ุชุฎูู
- period_start: ุดุฑูุน ุฏูุฑู
- period_end: ูพุงุงู ุฏูุฑู
- total_usage_count: ุชุนุฏุงุฏ ฺฉู ุงุณุชูุงุฏู
- total_discount_amount: ูุจูุบ ฺฉู ุชุฎูู
- total_revenue_impact: ุชุฃุซุฑ ุจุฑ ุฏุฑุขูุฏ
```

## API Endpoints

### ูุณุช ุชุฎููุงุช
```
GET /discounts/
```

### ุฌุฒุฆุงุช ุชุฎูู
```
GET /discounts/<id>/
```

### ุงุนูุงู ฺฉุฏ ุชุฎูู
```
POST /discounts/apply-coupon/
{
    "coupon_code": "WELCOME20",
    "amount": 100000
}
```

### ุจุฑุฑุณ ุชุฎููุงุช ุฎูุฏฺฉุงุฑ
```
POST /discounts/check-automatic/
{
    "user_id": 1,
    "doctor_id": 2,
    "amount": 100000
}
```

### ุชุฎููุงุช ููุฌูุฏ
```
GET /discounts/available/
```

## ุงุณุชูุงุฏู ุฏุฑ ฺฉุฏ

### ูุญุงุณุจู ุชุฎูู
```python
from discounts.models import Discount

discount = Discount.objects.get(id=1)
amount = Decimal('100000')
discount_amount = discount.calculate_discount(amount)
```

### ุจุฑุฑุณ ุงูฺฉุงู ุงุณุชูุงุฏู
```python
can_use = discount.can_be_used_by_user(user)
```

### ุงุนูุงู ุชุฎูู ุจู ุฑุฒุฑู
```python
success, message = discount.apply_to_reservation(reservation, user)
```

## ุชุณุชโูุง

ุณุณุชู ุดุงูู ุชุณุชโูุง ุฌุงูุน ุจุฑุง ุชูุงู ุนููฺฉุฑุฏูุง ุงุณุช:

```bash
python manage.py test discounts
```

### ุชุณุชโูุง ููุฌูุฏ:
- โ ุงุฌุงุฏ ุชุฎูู
- โ ุงุฌุงุฏ ฺฉุฏ ุชุฎูู
- โ ูุญุงุณุจู ุชุฎูู ุฏุฑุตุฏ
- โ ูุญุงุณุจู ุชุฎูู ูุจูุบ ุซุงุจุช
- โ ุญุฏุงฺฉุซุฑ ูุจูุบ ุชุฎูู
- โ ุงุนุชุจุงุฑ ุชุฎูู
- โ ุชุฎููุงุช ุฎูุฏฺฉุงุฑ
- โ ฺฏุฒุงุฑุดโฺฏุฑ
- โ ูุญุฏูุฏุช ุงุณุชูุงุฏู

## ฺฉุฏูุง ุชุฎูู ููููู

ูพุณ ุงุฒ ุงุฌุฑุง `create_sample_discounts`ุ ฺฉุฏูุง ุฒุฑ ุฏุฑ ุฏุณุชุฑุณ ุฎูุงููุฏ ุจูุฏ:

- `WELCOME20`: ุชุฎูู ฒฐ ุฏุฑุตุฏ ูฺู
- `SAVE50K`: ุชุฎูู ตฐ ูุฒุงุฑ ุชููุงู
- `NEWPATIENT`: ุชุฎูู ูฺู ุจูุงุฑุงู ุฌุฏุฏ
- `LOYALTY10`: ุชุฎูู ููุงุฏุงุฑ

## ุงููุช

- โ ุงุนุชุจุงุฑุณูุฌ ฺฉุฏูุง ุชุฎูู
- โ ุจุฑุฑุณ ูุญุฏูุฏุชโูุง ุงุณุชูุงุฏู
- โ ุฌููฺฏุฑ ุงุฒ ุงุณุชูุงุฏู ูฺฉุฑุฑ
- โ ุฑุฏุงุจ ุชูุงู ุงุณุชูุงุฏูโูุง

## ุนููฺฉุฑุฏ

- โ ฺฉุด ฺฉุฑุฏู ุชุฎููุงุช ูุนุงู
- โ ุงูุฏฺฉุณโฺฏุฐุงุฑ ููุงุณุจ ุฏุชุงุจุณ
- โ ฺฉูุฆุฑโูุง ุจููู ุดุฏู

## ูพุดุชุจุงู

ุจุฑุง ูุดฺฉูุงุช ู ุณูุงูุงุช:
1. ุจุฑุฑุณ ูุงฺฏโูุง Django
2. ุจุฑุฑุณ ูุถุนุช ุชุฎููุงุช ุฏุฑ ูพูู ุงุฏูู
3. ุงุฌุฑุง ุชุณุชโูุง ุจุฑุง ุชุดุฎุต ูุดฺฉู

## ุชูุณุนู ุขูุฏู

- [ ] ุชุฎููุงุช ฺฏุฑูู
- [ ] ุชุฎููุงุช ุจุฑ ุงุณุงุณ ูููุนุช ุฌุบุฑุงูุง
- [ ] ฺฉูพุงุฑฺฺฏ ุจุง ุณุณุชูโูุง ูพุฑุฏุงุฎุช
- [ ] ุชุฎููุงุช ุดุฎุตโุณุงุฒ ุดุฏู
- [ ] API GraphQL

---

**ูุณุฎู**: 1.0.0  
**ุชุงุฑุฎ**: ฑดฐณ/ฑฐ/ฑต  
**ุชูุณุนูโุฏููุฏู**: ุชู Dr. Turn 