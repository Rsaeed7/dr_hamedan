{% extends  'base/base.html' %}
{% load static %}
{% block body %}
    
    
    <!-- Search -->
{% include  'base/search.html' %}
    <!-- /Search -->

    <div class="filters_listing">
        <div class="container">
            <ul class="clearfix">
                <li>
                    <h6>فیلتر کردن</h6>
                    <div class="switch-field">
                        <input type="radio" id="all" name="type_patient" value="all" checked>
                        <label for="all">همه</label>
                        <input type="radio" id="doctors" name="type_patient" value="doctors">
                        <label for="doctors">پزشکان</label>
                        <input type="radio" id="clinics" name="type_patient" value="clinics">
                        <label for="clinics">کلینیک ها</label>
                    </div>
                </li>
                <li>
                    <h6>سرویس ها</h6>
                    <div class="switch-field">
                        <input type="radio" id="online" name="layout_view" value="online" checked>
                        <label for="online">بیمه</label>
                        <input type="radio" id="row" name="layout_view" value="row">
                        <label for="row">اورژانسی</label>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div class="container margin_60_35">
        <div class="row">
            <aside class="col-lg-3 mb-4">
                <div id="filters_col">
                    <a data-toggle="collapse" href="#collapseFilters" aria-expanded="false" aria-controls="collapseFilters" id="filters_col_bt">فیلتر ها </a>
                    <div class="collapse show" id="collapseFilters">
                        <div class="filter_type">
                            <h6>تخصص</h6>
                            <ul>
                                <li>
                                    <label class="container_check">تخصص مغز و اعصاب<small>12</small>
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </li>
                                <li>
                                    <label class="container_check">پزشک عمومی<small>24</small>
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </li>
                                <li>
                                    <label class="container_check">تخصص قلب و عروق<small>23</small>
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </li>
                                <li>
                                    <label class="container_check">متخصص گوارش<small>11</small>
                                        <input type="checkbox">
                                        <span class="checkmark"></span>
                                    </label>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </aside>

            <div class="col-lg-9">
                <div class="row">
                    {% for doctor in doctors %}
                    <div class="col-md-4">
                        <div class="box_list wow fadeIn">
                            <a href="{% url 'doctors:doctor_detail' doctor.id %}" class="wish_bt"></a>
                            <figure>
                                <a href="{% url 'doctors:doctor_detail' doctor.id %}">
                                    {% if doctor.profile_image %}
                                    <img src="{{ doctor.profile_image.url }}" class="img-fluid" alt="">
                                    {% else %}
                                    <img src="{% static 'img/dr/dr1.jfif' %}" class="img-fluid" alt="">
                                    {% endif %}
                                </a>
                                <div class="preview"><span>مشاهده</span></div>
                            </figure>
                            <div class="wrapper">
                                <small>{{ doctor.specialization }}</small>
                                <h3>{{ doctor.user.get_full_name }}</h3>

                                <p>{{ doctor.bio|truncatechars:100 }}</p>
                                <span class="rating">
                                    <i class="icon_star voted"></i>
                                    <i class="icon_star voted"></i>
                                    <i class="icon_star voted"></i>
                                    <i class="icon_star voted"></i>
                                    <i class="icon_star"></i>
                                    <small>({{ doctor.consultation_fee }} تومان)</small>
                                </span>
                            </div>
                            <ul>
                                <li><i class="icon-location-outline"></i>{% if doctor.address %}{{ doctor.address }}{% else %}همدان{% endif %}</li>
                                <li>
                                    <a href="{% url 'doctors:doctor_detail' doctor.id %}">پروفایل</a>
                                    <a href="{% url 'turn:turn_days' %}?doctor={{ doctor.id }}">رزرو نوبت</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12 text-center">
                        <p>پزشکی یافت نشد.</p>
                    </div>
                    {% endfor %}
                </div>

                <!-- Pagination -->
                {% if doctors.has_other_pages %}
                <nav aria-label="..." class="add_top_20">
                    <ul class="pagination pagination-sm">
                        {% if doctors.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ doctors.previous_page_number }}">قبلی</a>
                        </li>
                        {% else %}
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">قبلی</a>
                        </li>
                        {% endif %}
                        
                        {% for i in doctors.paginator.page_range %}
                            {% if doctors.number == i %}
                            <li class="page-item active">
                                <a class="page-link" href="#">{{ i }}</a>
                            </li>
                            {% else %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ i }}">{{ i }}</a>
                            </li>
                            {% endif %}
                        {% endfor %}
                        
                        {% if doctors.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ doctors.next_page_number }}">بعدی</a>
                        </li>
                        {% else %}
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">بعدی</a>
                        </li>
                        {% endif %}
                    </ul>
                </nav>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}